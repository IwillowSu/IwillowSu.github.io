<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>蘑菇种植园</title>
    <style>
        /* 这里放置所有CSS样式 */
    </style>
<meta name="generator" content="Hexo 7.3.0"></head>
<body>
    <div class="container">
        <!-- 侧边栏 -->
        <aside class="sidebar">
            <h1 class="site-title">蘑菇种植园</h1>
            <p class="site-description"></p>
            
            <ul class="nav-menu">
                <li class="nav-item"><a href="/" class="nav-link">首页</a></li>
                
            </ul>
            
            <div class="sidebar-footer">
                <p>© 2023 蘑菇种植园</p>
                <p>由Hexo驱动</p>
            </div>
        </aside>

        <!-- 主内容区 -->
        <main class="main-content">
            <h1 class="page-title">最新文章</h1>

<div class="post-list" id="postList">
    
        <article class="post-card">
            
            
            <div class="post-content">
                <h2 class="post-title">
                    <a href="/2025/08/22/hello-world/">Hello World</a>
                </h2>
                
                <div class="post-excerpt">
                    
                        Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any pro...
                    
                </div>
                
                <div class="post-meta">
                    <span>2025-08-22</span>
                    
                </div>
            </div>
        </article>
    
</div>

<div class="loading" id="loading">
    <div class="loader"></div>
    <p>正在加载更多内容...</p>
</div>

<script>
    // 无限滚动逻辑
    document.addEventListener('DOMContentLoaded', function() {
        const postList = document.getElementById('postList');
        const loadingElement = document.getElementById('loading');
        let nextPage = 2; // 从第二页开始
        let isLoading = false;
        
        // 加载更多文章
        function loadMorePosts() {
            if (isLoading) return;
            
            isLoading = true;
            loadingElement.style.display = 'block';
            
            // 使用Hexo的分页API获取下一页
            fetch(`/page/${nextPage}/`)
                .then(response => response.text())
                .then(html => {
                    const parser = new DOMParser();
                    const doc = parser.parseFromString(html, 'text/html');
                    const newPosts = doc.querySelectorAll('.post-card');
                    
                    if (newPosts.length > 0) {
                        newPosts.forEach(post => {
                            postList.appendChild(post);
                        });
                        nextPage++;
                    } else {
                        // 没有更多内容
                        loadingElement.innerHTML = '<p>已加载全部内容</p>';
                        observer.unobserve(loadingElement);
                    }
                })
                .catch(error => {
                    console.error('加载更多文章时出错:', error);
                    loadingElement.innerHTML = '<p>加载失败，请稍后重试</p>';
                })
                .finally(() => {
                    isLoading = false;
                });
        }
        
        // 无限滚动检测
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    loadMorePosts();
                }
            });
        });
        
        observer.observe(loadingElement);
    });
</script>
        </main>
    </div>
    
    <script>
        // 响应式菜单切换（移动设备）
        document.addEventListener('DOMContentLoaded', function() {
            const menuToggle = document.createElement('button');
            menuToggle.innerHTML = '☰';
            menuToggle.style.position = 'fixed';
            menuToggle.style.top = '1rem';
            menuToggle.style.right = '1rem';
            menuToggle.style.zIndex = '1000';
            menuToggle.style.background = '#3a7bd5';
            menuToggle.style.color = 'white';
            menuToggle.style.border = 'none';
            menuToggle.style.borderRadius = '4px';
            menuToggle.style.padding = '0.5rem';
            menuToggle.style.fontSize = '1.5rem';
            menuToggle.style.cursor = 'pointer';
            menuToggle.style.display = 'none';
            
            menuToggle.addEventListener('click', function() {
                document.querySelector('.sidebar').classList.toggle('active');
            });
            
            document.body.appendChild(menuToggle);
            
            function checkWidth() {
                if (window.innerWidth <= 900) {
                    menuToggle.style.display = 'block';
                    document.querySelector('.sidebar').classList.remove('active');
                } else {
                    menuToggle.style.display = 'none';
                    document.querySelector('.sidebar').classList.add('active');
                }
            }
            
            window.addEventListener('resize', checkWidth);
            checkWidth();
        });
    </script>
</body>
</html>